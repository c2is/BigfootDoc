<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Bigfoot's documentation</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="../css/normalize.min.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/font-awesome.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body id="top">
<div class="header-container">
    <header class="wrapper clearfix">
        <h1 class="title">Bigfoot's documentation</h1>
        <ul class="nav">
            <li id="lang"><a id="en" href="../en/chapter1.html">EN</a> | <a href="../fr/chapter1.html" id="fr">FR</a>
        </ul>
    </header>
</div>

<div class="main-container">
    <div class="main wrapper clearfix">
        <aside id="toc">
            <ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Introduction">Introduction</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Contexts">Contexts</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Define-a-context">Define a context</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Define-a-quot-contextualizedquot-entities-with-annotation">Define a &quot;contextualized&quot; entities with annotation</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Context-loaders">Context loaders</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#General">General</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Generating-CRUD-in-Bigfoot">Generating CRUD in Bigfoot</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Adding-a-menu-in-Bigfoot">Adding a menu in Bigfoot</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter1.html#Store-translations-in-database">Store translations in database</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter3.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter3.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter3.html#-"></a>
<ul class="toc-list">
<li class="toc-entry">
<a href="chapter3.html#Page-3">Page 3</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </aside>
        <article id="page">
            <header>

            </header>
            <h3 id="Introduction">Introduction</h3>
<p>Bifgoot is a CMF (Content Management Framework) built on the Symfony 2 framework and Doctrine ORM. It provides a simple and easy extendable back office : each feature can be easily extended by the developer who wants to implement its own needs.</p>

<p>Here is a non comprehensive list of native features :</p>
<ul>
<li>users and roles management,
</li>
<li>languages management,
</li>
<li>contexts management,
</li>
<li>external and internal (imports) data streams management,
</li>
<li>content images management (portfolio),
</li>
<li>menus management,
</li>
<li>contents management,
</li>
<li>metadata SEO management.</li></ul>


<h3 id="Contexts">Contexts</h3>
<p>This powerful feature allow you to easily filter data shown to users. Languages management uses this.</p>

<h4 id="Define-a-context">Define a context</h4>
<pre class="language-yaml" style="font-family:monospace;"><span style="color: blue;"># /src/Sandbox/MovieBundle/Entity/Movie.php</span><span style="color: #007F45;">
bigfoot_context</span><span style="font-weight: bold; color: brown;">:
</span>    <span style="color: blue;"># A list of entities to mark as &quot;can be contextualized&quot;.</span>
    <span style="color: blue;"># You can add multiple classes at once using a namespace prefix.</span>
    <span style="color: blue;"># For example, adding Bigfoot\ means every entity which namespace begins with Bigfoot\ will be contextualizable.</span><span style="color: #007F45;">
    entities</span><span style="font-weight: bold; color: brown;">:
</span>        - <span style="color: #CF00CF;">&quot;Bigfoot\\&quot;</span>
    <span style="color: blue;"># A list of contexts.</span>
    <span style="color: blue;"># The name used for each context is relevant and will be used to identify a context.</span><span style="color: #007F45;">
    contexts</span>:<span style="color: #007F45;">
        language</span><span style="font-weight: bold; color: brown;">:
</span>            <span style="color: blue;"># A list of context loaders that will be called successively, in the order they appear in the configuration, to determine what is the current context during the navigation.</span><span style="color: #007F45;">
            loaders</span>:<span style="color: green;">
                back</span><span style="font-weight: bold; color: brown;">: </span>      <span style="color: #CF00CF;">&quot;bigfoot_language_loader&quot;</span>
            <span style="color: blue;"># A list of label / value representing each individual context.</span><span style="color: #007F45;">
            values</span>:<span style="color: #007F45;">
                fr</span>:<span style="color: green;">
                    label</span><span style="font-weight: bold; color: brown;">: </span> <span style="color: #CF00CF;">&quot;French&quot;</span><span style="color: green;">
                    value</span><span style="font-weight: bold; color: brown;">: </span> <span style="color: #CF00CF;">&quot;fr&quot;</span><span style="color: #007F45;">
                en</span>:<span style="color: green;">
                    label</span><span style="font-weight: bold; color: brown;">: </span> <span style="color: #CF00CF;">&quot;English&quot;</span><span style="color: green;">
                    value</span><span style="font-weight: bold; color: brown;">: </span> <span style="color: #CF00CF;">&quot;en&quot;</span>
            <span style="color: blue;"># The default value for this context.</span><span style="color: green;">
            default_value</span><span style="font-weight: bold; color: brown;">: </span> <span style="font-weight: bold; color: red;">%locale%</span>
            <span style="color: blue;"># String representation for the context.</span><span style="color: green;">
            label</span><span style="font-weight: bold; color: brown;">: </span>         <span style="color: #CF00CF;">&quot;Language&quot;</span></pre>

<p>An other way exists to define &quot;contextualized&quot; entities : with annotation.</p>
<h4 id="Define-a-contextualized-entities-with-annotation">Define a &quot;contextualized&quot; entities with annotation</h4>

<pre class="language-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;"># /src/Sandbox/MovieBundle/Entity/Movie.php
</span><span style="color: #000000; font-weight: bold;">use</span> Bigfoot\Bundle\CoreBundle\Annotation\Bigfoot<span style="color: #339933;">;</span>
<span style="color: #009933; font-style: italic;">/**
 * Movie
 *
 * @ORM\Table(name=&quot;sandbox_movie&quot;)
 * @ORM\Entity(repositoryClass=&quot;Sandbox\MovieBundle\Entity\MovieRepository&quot;)
 * @Bigfoot\Context({&quot;distributor&quot;})
 */</span>
<span style="color: #000000; font-weight: bold;">class</span> Movie
<span style="color: #009900;">&#123;</span><span style="color: #339933;">...</span><span style="color: #009900;">&#125;</span></pre>
<h4 id="Context-loaders">Context loaders</h4>
<p>Context loaders must be placed in the ContextLoaders/ folder in your bundle.
<br />They must extend Bigfoot\Bundle\ContextBundle\Model\AbstractContextLoader and implement the methodes getName() (returns a string corresponding to the name of one of the contexts in the bundle configuration) and getValue() (returns the current value for the context).
<br />If a context loader returns a false equivalent value, the next loader will be called, until all loaders have been called. If no context value is found, the default_value set in the bundle configuration for that context will be used.</p>

<p>Example : a context loader which compute the context value from the current subdomain.</p>
<pre class="language-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#/src/Sandbox/DistributorBundle/Loader/DistributorLoader.php
</span><span style="color: #000000; font-weight: bold;">namespace</span> Sandbox\DistributorBundle\Loader<span style="color: #339933;">;</span>
<span style="color: #000000; font-weight: bold;">use</span> Bigfoot\Bundle\ContextBundle\Loader\AbstractLoader<span style="color: #339933;">;</span>
&nbsp;
<span style="color: #009933; font-style: italic;">/**
 * Class LanguageLoader
 * @package Bigfoot\Bundle\ContextBundle\ContextLoader
 */</span>
<span style="color: #000000; font-weight: bold;">class</span> DistributorLoader <span style="color: #000000; font-weight: bold;">extends</span> AbstractLoader
<span style="color: #009900;">&#123;</span>
    <span style="color: #009933; font-style: italic;">/**
     * @return mixed
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getValue<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #000088;">$domain</span>            <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getRequest</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getHttpHost</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #000088;">$values</span>            <span style="color: #339933;">=</span> <a href="http://www.php.net/explode"><span style="color: #990000;">explode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;.&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$domain</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #000088;">$distributor</span>       <span style="color: #339933;">=</span> <a href="http://www.php.net/array_shift"><span style="color: #990000;">array_shift</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$values</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
        <span style="color: #000088;">$distributorValues</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getValueForKey</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$distributor</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
&nbsp;
        <span style="color: #b1b100;">return</span> <span style="color: #000088;">$distributorValues</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
&nbsp;
    <span style="color: #009933; font-style: italic;">/**
     * @return string
     */</span>
    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getContextName<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
    <span style="color: #009900;">&#123;</span>
        <span style="color: #b1b100;">return</span> <span style="color: #0000ff;">'distributor'</span><span style="color: #339933;">;</span>
    <span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span></pre>

<h3 id="General">General</h3>
<h4 id="Generating-CRUD-in-Bigfoot">Generating CRUD in Bigfoot</h4>
<ul>
<li>Have an existing doctrine entity (in the Entity/ folder in a Bundle) by creating it yourself or using the generate:doctrine:entity command
</li>
<li>use generate:bigfoot:crud. It works exactly like doctrine:generate:crud (It actually extends that command and uses its own templates to generate files)
</li>
<li>A controller extending Bigfoot\Bundle\CoreBundle\Crud\CrudController will be generated in the Controller/ folder of your bundle. A FormType for your entity will also be generated if not existing.
</li>
<li>The routing isn't generated! You need to add the newly created Controller in your relevent routing configuration file(s) (usually will be app/config/routing_admin.yml)
</li>
<li>The menu isn't generated (yet?)! Your form and controller are generated and you edited your routing configuration and it all works if you type in the URL directly. But you need to add a menu to your CRUD screens to the Bigfoot administration interface menu.</li></ul>


<h4 id="Adding-a-menu-in-Bigfoot">Adding a menu in Bigfoot</h4>
<p>Menu items in Bigfoot are added by Listeners. It allows any Bundle to register its own menu items  that will aggregate with other items added by other bundles.</p>
<ul>
<li>Create a Listener :
<ul><li>Listeners must be located in a Listener/ folder in your bundle and listen on the &quot;bigfoot.menu.generate&quot; event.
</li>
<li>This event uses the Bigfoot\Bundle\CoreBundle\Event\MenuEvent class to provide the menu to the listener.
</li>
<li>The event is thrown by Bigfoot everytime it instanciates a menu somewhere. Simply adding your item on the given menu will add it on every menu in the administration interface. To add your item only to a specific menu, you must test the menu name.
</li>
<li>On your standard, v0 Bigfoot interface, menus used are :
<ul><li>sidebar_menu: The main menu located in the left sidebar.
</li>
<li>toolbar_menu: The menu located in the toolbar, used to display user informations and user settings links.
</li>
<li>actions_menu: Menu used in listings to allow for custom actions on the current list (add item, export ...)</li></ul>
</li></ul>
</li></ul>


<p>Example :</p>
<pre class="language-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#Acme/Bundle/MyBundle/Listener/MenuListener.php
</span>	<span style="color: #000000; font-weight: bold;">namespace</span> Acme\BundleMyBundle\Listener<span style="color: #339933;">;</span>
&nbsp;
	<span style="color: #000000; font-weight: bold;">use</span> Bigfoot\Bundle\CoreBundle\Event\MenuEvent<span style="color: #339933;">;</span>
	<span style="color: #000000; font-weight: bold;">use</span> Bigfoot\Bundle\CoreBundle\Theme\Menu\Item<span style="color: #339933;">;</span>
&nbsp;
	<span style="color: #000000; font-weight: bold;">class</span> MenuListener
	<span style="color: #009900;">&#123;</span>
	    <span style="color: #009933; font-style: italic;">/**
	     * @param MenuEvent $event
	     */</span>
	    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> onMenuGenerate<span style="color: #009900;">&#40;</span>MenuEvent <span style="color: #000088;">$event</span><span style="color: #009900;">&#41;</span>
	    <span style="color: #009900;">&#123;</span>
	        <span style="color: #000088;">$menu</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$event</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getMenu</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
	        <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'sidebar_menu'</span> <span style="color: #339933;">==</span> <span style="color: #000088;">$menu</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getName</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>
	            <span style="color: #000088;">$navigation</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Item<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'sidebar_mymenu'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'My menu'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
	            <span style="color: #000088;">$navigation</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">addChild</span><span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Item<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'sidebar_mymenu_mysubmenu'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'My submenu'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'my_route'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
	            <span style="color: #000088;">$menu</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">addItem</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$navigation</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
	        <span style="color: #009900;">&#125;</span>
	    <span style="color: #009900;">&#125;</span>
	<span style="color: #009900;">&#125;</span></pre>

<p>Acme/Bundle/MyBundle/Resources/config/services.yml</p>
<pre class="language-yaml" style="font-family:monospace;"><span style="color: #007F45;">	kernel.listener.my_menu_listener</span>:<span style="color: green;">
	        class</span><span style="font-weight: bold; color: brown;">: </span>Acme/Bundle/MyBundle/Listener/MenuListener<span style="color: #007F45;">
	        tags</span>:<span style="color: green;">
	            - { name</span><span style="font-weight: bold; color: brown;">: </span>kernel.event_listener, event<span style="font-weight: bold; color: brown;">: </span>bigfoot.menu.generate, method<span style="font-weight: bold; color: brown;">: </span>onMenuGenerate <span class="br0">&#125;</span></pre>

<h4 id="Store-translations-in-database">Store translations in database</h4>
<p>You can persist Bigfoot\Bundle\CoreBundle\Entity\TranslatableLabel entities and have them available as translations in Symfony 2 :</p>
<ul>
<li>TranslatableLabel-&gt;domain : The domain for this label (defaults to &quot;messages&quot;).
</li>
<li>TranslatableLabel-&gt;locale : The locale for this label.
</li>
<li>TranslatableLabel-&gt;name : Identifier of the label - eg a label named &quot;homepage.title&quot; will be matched when using </li></ul>

<pre class="language-twig" style="font-family:monospace;"><span style="color: #008000;"><span style="color: #D36900;">&#123;</span><span style="color: #D36900;">&#123;</span></span> <span style="color: #ff0000;">'homepage.title'</span> <span style="color: #D36900;">|</span> <a href="http://twig.sensiolabs.org/doc/tags/trans.html"><span style="color: #0600FF;">trans</span></a> <span style="color: #008000;"><span style="color: #D36900;">&#125;</span><span style="color: #D36900;">&#125;</span></span> </pre>
<ul>
<li>TranslatableLabel-&gt;value : The translated value to display.</li></ul>


<p>For it to work, you must add translation files into your app/Resources/translations directory named &quot;&lt;domain&gt;.&lt;locale&gt;.db&quot;, eg : messages.en.db or Symfony 2 won't load your translations.</p>
            <footer>

            </footer>
        </article>


    </div> <!-- #main -->

</div> <!-- #main-container -->

<div class="footer-container">
    <footer class="wrapper">

    </footer>
</div>

</body>
</html>
